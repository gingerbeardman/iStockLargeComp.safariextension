<!DOCTYPE HTML>
<script>
safari.application.addEventListener("command", performCommand, false);
safari.application.addEventListener("validate", validateCommand, false);

function performCommand(event)
{
	if (event.command !== "viewFS") return;
	
	event.currentTarget.activeBrowserWindow.openTab().url = event.userInfo.url;
}

function validateCommand(event)
{
	if (event.command !== "viewFS") return;

	var state = (event.userInfo.classname != 'jewelcase') || (!event.userInfo.url);
	event.target.disabled = state;
}
</script>